# Relationship Mining (Agentic Workflow)

## 概要 (Overview)
**"People Database Builder"**
日誌や議事録から「人物」に関する情報を抽出し、人脈資産データベース（`03_知識ベース/人の情報（relationship）`）を構築・更新するオートメーション・ワークフローです。
人間関係の文脈（前回何を話したか、相手の好み、ニーズ）を保持し、次回のコミュニケーションの質を高めることを目的とします。

## Trigger
*   **Routine**: `Weekly Review` ワークフローの **Phase 4** として自動実行。

## Prerequisite (事前準備)
*   **対象範囲**: 直近7日間の日誌ファイルすべて（`05_日誌` 配下）。
*   `03_知識ベース/人の情報（relationship）` ディレクトリへのアクセス権
*   **参照元**: `今日のタスク`、`思考と感情のログ`、`抽出された情報` などの全セクション。

---

## Agent Action Protocol

### Step 1: Extraction (抽出)
**Null Check (重要)**: まずログ全体をスキャンし、新しい、または更新すべき「人物情報」の記述があるか確認してください。
**情報がない場合**: 「※関連する人物情報は見つかりませんでした。」と出力し、**ここで処理を終了**してください。無理に抽出しようとしないでください。

対象のログから、特定の人物に関する以下の情報を抽出してください。
（※ユーザー本人、および家族など既知の身内は除く）

*   **基本情報**: 名前、肩書き、所属、連絡先（もしあれば）
*   **興味・選好**: 好きなもの（食べ物、酒、趣味）、嫌いなもの。
*   **文脈 (Context)**:
    *   今回話したトピック。
    *   相手が現在抱えている課題やニーズ。
    *   ユーザーが相手に提供した価値（Give）、または受け取った恩恵（Take/Gift）。
    *   次回のアクション約束。

### Step 2: Database Update (更新)
`03_知識ベース\人の情報（relationship）` を確認し、以下のルールで更新します。

1.  **既存ファイルの確認**:
    *   対象人物の名前（またはそのフォルダ）が存在するか検索する。
    *   表記ゆれ（例: "イケハヤさん" vs "イケハヤ氏"）に注意する。

2.  **新規作成 (New Entry)**:
    *   ファイルが存在しない場合、`[名前].md` を新規作成する。
    *   基本フォーマット:
        ```markdown
        # [名前]
        ## 基本情報
        *   所属/肩書き: 
        
        ## 嗜好・特性
        *   (抽出した好みなど)
        
        ## Interaction Log
        *   **YYYY-MM-DD**: (出来事のサマリ)
        ```

3.  **追記 (Append)**:
    *   ファイルが既に存在する場合、最下部（または適切なセクション）に**日付付き**で情報を追記する。
    *   **既存の情報を削除してはいけない。**

### Step 3: Reporting (完了報告)
*   「〇〇さんの情報を更新しました」とユーザーに簡潔に報告する。
*   特筆すべき「発見（あ、この人これ好きだったんだ）」があれば強調する。
