# 🚨 SEOフィールド設定ロック

## ⚠️ 最重要事項：変更絶対禁止

**このファイルに記載された設定は、ユーザーが明示的に変更指示を出さない限り、絶対に変更してはならない。**
**違反した場合は最重要違反となる。**

---

## 📋 現在のSEOフィールド構成（確定版）

### ✅ 使用中のフィールド（変更禁止）

#### 1. excerpt（記事要約）
- **型**: text
- **説明**: 記事の要約（100〜150文字）
- **用途**: 記事一覧、SNSシェア、検索結果のスニペット
- **バリデーション**: 最大200文字
- **必須**: 推奨

#### 2. metaDescription（SEO説明文）
- **型**: text
- **説明**: 検索結果に表示される説明文（120〜160文字推奨）
- **用途**: Google検索結果のディスクリプション
- **バリデーション**: 最小120文字、最大160文字
- **必須**: 推奨

#### 3. tags（タグ）
- **型**: array of string
- **説明**: 記事に関連するタグ・キーワード（10個程度推奨）
- **用途**: 検索、カテゴリ分類、関連記事表示、SEOキーワード
- **バリデーション**: 最大15個（警告）
- **必須**: 任意

### ❌ 削除済みフィールド（追加禁止）

以下のフィールドは**過剰なSEO設定**として削除済み。
**絶対に再追加してはならない:**

1. ❌ `metaTitle`
   - 理由: `title`フィールドで十分。重複管理が煩雑

2. ❌ `focusKeyword`
   - 理由: `tags`で代替可能。専用フィールド不要

3. ❌ `relatedKeywords`
   - 理由: `tags`で代替可能。専用フィールド不要

---

## 📊 削除の経緯

### 実施日
2025-10-08

### 理由
1. **過剰なSEO設定**: 117件の記事に不要なメタデータが自動生成された
2. **管理の煩雑さ**: 類似フィールドが複数あり、運用が複雑
3. **SEO効果**: シンプルな構成でも十分な効果が得られる

### 実施内容
1. スキーマから`metaTitle`, `focusKeyword`, `relatedKeywords`を削除
2. 全156記事から上記フィールドのデータを削除（`cleanup-fields.js`実行）
3. メタデータ生成スクリプトを`excerpt`と`metaDescription`のみに簡素化
4. フロントエンド（`src/app/posts/[slug]/page.tsx`）を更新

---

## 🔒 変更禁止ルール

### 絶対に行ってはならないこと

1. ❌ `metaTitle`, `focusKeyword`, `relatedKeywords`フィールドの再追加
2. ❌ 新しいSEO専用フィールドの追加（ユーザー指示なし）
3. ❌ `excerpt`, `metaDescription`の削除
4. ❌ フィールド名の変更
5. ❌ バリデーションルールの変更

### 許可される変更（ユーザー明示指示がある場合のみ）

1. ✅ `excerpt`, `metaDescription`の説明文・バリデーション調整
2. ✅ 新しいSEOフィールドの追加（ユーザーが明確に指示した場合）
3. ✅ タグ数上限の調整

---

## 📁 関連ファイル

### スキーマ定義
- `/Users/user/prorenata/schemas/post.ts`
  - 行108-123: excerpt, metaDescription定義

### スクリプト
- `/Users/user/prorenata/scripts/generate-metadata.js`
  - excerpt, metaDescription生成ロジック

- `/Users/user/prorenata/scripts/maintenance.js`
  - メタデータ不足チェック（excerpt, metaDescriptionのみ）

- `/Users/user/prorenata/scripts/cleanup-fields.js`
  - 不要フィールド削除スクリプト（実行済み）

### フロントエンド
- `/Users/user/prorenata/src/app/posts/[slug]/page.tsx`
  - 行39-53: メタデータクエリ
  - 行70-79: メタデータ生成ロジック

---

## 🔄 メンテナンス状況

### 最終確認日
2025-10-08

### 現在の状態
- ✅ 全156記事に`excerpt`設定済み
- ✅ 全156記事に`metaDescription`設定済み
- ✅ 全156記事に`tags`設定済み
- ✅ 不要フィールド（metaTitle, focusKeyword, relatedKeywords）完全削除済み

---

## 📝 今後の対応

### ユーザーからSEO変更の指示があった場合

1. **必ず確認**: 「現在のSEOフィールド構成を変更しますか？SEO-FIELDS-LOCK.mdをご確認ください」
2. **明示的な承認**: ユーザーが「はい、変更してください」と明言した場合のみ実行
3. **記録更新**: このファイルを更新し、変更履歴を記載

### 禁止事項の再確認

- Claude（AI）が自主的にSEOフィールドを追加・変更することは**絶対禁止**
- ユーザーの明示的な指示なしに、SEO最適化を理由にフィールドを追加することは**最重要違反**

---

## 🚫 違反例（絶対にやってはいけない）

### ❌ 悪い例1
```
ユーザー: 「SEOを改善したい」
Claude: 「focusKeywordフィールドを追加しましょう」← 違反！
```

### ❌ 悪い例2
```
ユーザー: 「記事のメタデータを充実させたい」
Claude: 「metaTitleフィールドを追加してtitleと別管理にします」← 違反！
```

### ✅ 良い例1
```
ユーザー: 「SEOを改善したい」
Claude: 「現在のexcerpt, metaDescription, tagsで十分なSEO対策ができています。
        追加フィールドが必要な場合は、SEO-FIELDS-LOCK.mdをご確認の上、
        明示的にご指示ください」← 正しい
```

### ✅ 良い例2
```
ユーザー: 「focusKeywordフィールドを追加してください」
Claude: 「承知しました。SEO-FIELDS-LOCK.mdに記載の通り、
        このフィールドは削除済みですが、追加で問題ないでしょうか？」
ユーザー: 「はい、追加してください」
Claude: （フィールド追加実行 + このファイル更新）← 正しい
```

---

## 🔍 定期確認コマンド

メタデータ状態の確認:
```bash
node scripts/maintenance.js metadata
```

期待される出力:
```
📋 メタデータ不足の記事:
  ⚠️  Excerpt なし: 0件
  ⚠️  Meta Description なし: 0件
  📊 合計: 0件の記事に何らかのメタデータ不足
```

---

**最終更新**: 2025-10-08
**責任者**: ユーザー指示により確定
**変更権限**: ユーザーの明示的指示がある場合のみ
