# ProReNata コンテンツ改善ガイド

## 📊 現状サマリー（2025-10-08更新）

### ✅ 完了済み
- **メタデータ補完**: 全156記事のメタデータが完備
  - excerpt（記事要約）: 100%完了
  - metaDescription（SEO説明文）: 100%完了
  - focusKeyword（メインキーワード）: 100%完了
  - relatedKeywords（関連キーワード）: 100%完了

- **タグ最適化**: 全156記事にSEO最適タグを設定済み

- **機能実装完了**:
  - 関連記事表示システム
  - 閲覧数カウンター
  - 人気記事ランキング
  - 記事テンプレートシステム

### 🚧 要対応
1. **画像追加**: 156記事全てにメイン画像なし
   - 現在は画像なしで運用（ユーザー判断で後回し）

2. **コンテンツ拡充**: 105記事が1500文字未満
   - 最短: 804文字（看護助手の夜勤手当はいくらもらえる？）
   - 推奨: 1500-2500文字

---

## 🛠️ 利用可能なツール

### 1. メタデータ生成ツール
**ファイル**: `scripts/generate-metadata.js`

**機能**:
- 記事内容から自動的にメタデータ生成
- excerpt、metaDescription、focusKeyword、relatedKeywordsを自動作成

**使い方**:
```bash
# 全記事のメタデータを一括生成
node scripts/generate-metadata.js bulk

# 特定記事のメタデータ生成
node scripts/generate-metadata.js single <記事ID>

# ドライラン（プレビューのみ）
node scripts/generate-metadata.js bulk --dry-run
```

### 2. コンテンツ拡充支援ツール
**ファイル**: `scripts/expand-content.js`

**機能**:
- 文字数不足の記事を検出
- 見出し構造を分析
- カテゴリ別の拡充提案を生成

**使い方**:
```bash
# 文字数不足記事の一覧表示
node scripts/expand-content.js list

# 文字数不足記事の一覧（10件まで）
node scripts/expand-content.js list --limit 10

# 特定記事の詳細分析と改善提案
node scripts/expand-content.js analyze <記事ID>

# 2000文字未満の記事を表示
node scripts/expand-content.js list --min 2000
```

**出力例**:
```
📄 精神科病棟で働く看護助手の業務内容とは

📊 現状分析:
   文字数: 379文字
   段落数: 4段落
   見出し: H2×4, H3×4

💡 改善提案:
1. 🔴 文字数が1121文字不足しています
2. 🔴 段落が少なすぎます
   → 具体例、体験談、データなどを追加してください
```

### 3. メンテナンスツール
**ファイル**: `scripts/maintenance.js`

**機能**:
- 総合的な記事品質レポート生成
- 古い記事の検出
- メタデータ不足の検出
- 画像なし記事の検出
- 文字数不足の検出

**使い方**:
```bash
# 総合レポート生成
node scripts/maintenance.js report

# 6ヶ月以上更新なしの記事検索
node scripts/maintenance.js old 6

# メタデータ不足の記事検索
node scripts/maintenance.js metadata

# 画像なし記事検索
node scripts/maintenance.js images

# 文字数不足記事検索（1500文字未満）
node scripts/maintenance.js short 1500
```

### 4. 記事作成ツール
**ファイル**: `scripts/create-post.js`

**機能**:
- 対話形式で新規記事を作成
- カテゴリ選択
- 3種類のテンプレートから選択
- 自動スラッグ生成

**使い方**:
```bash
# 新規記事作成（対話形式）
node scripts/create-post.js
```

**テンプレート種類**:
1. **基礎知識・解説系**: 初心者向け説明記事
2. **実践ノウハウ系**: 具体的な手順・コツ
3. **キャリア・転職系**: キャリア判断・選択肢提示

---

## 📝 コンテンツ拡充の進め方

### Step 1: 優先順位の決定
```bash
# 文字数が特に少ない記事を確認
node scripts/expand-content.js list --limit 20
```

### Step 2: 個別記事の分析
```bash
# 記事IDを取得（URLから or Sanity Studioから）
# 詳細分析を実行
node scripts/expand-content.js analyze <記事ID>
```

### Step 3: Sanity Studioで編集
1. http://localhost:3333 でSanity Studioを開く
2. 該当記事を検索
3. 改善提案に基づいて内容を追加:
   - **具体例を追加**: 「例えば〜」「実際に〜」
   - **数字・データを追加**: 「平均〜」「約〜％」
   - **体験談を追加**: 「〜という声が多い」
   - **見出しを追加**: H2/H3で構造化
   - **箇条書きを活用**: 読みやすさ向上

### Step 4: 品質チェック
```bash
# 改善後、再度分析
node scripts/expand-content.js analyze <記事ID>
```

---

## 🎯 コンテンツ品質基準

### 文字数
- **最低**: 1500文字
- **推奨**: 1500-2500文字
- **上限**: 特になし（3000文字超えも可）

### 見出し構造
- **H2見出し**: 3-5個
- **H3見出し**: 各H2セクション内に1-3個
- **H4見出し**: 必要に応じて

### 段落・リスト
- **段落数**: 最低5段落以上
- **箇条書き**: 3つ以上の項目がある場合は活用
- **1段落の文字数**: 100-200文字程度

### コンテンツ要素
必ず含めるべき要素:
1. **導入文**: 読者の課題に共感
2. **具体例**: 「例えば」「実際に」
3. **数字・データ**: 信頼性向上
4. **実践的アドバイス**: 「〜するとよい」
5. **まとめ**: 要点の再確認

---

## 📋 カテゴリ別の拡充アイデア

### 仕事内容系
- 1日のスケジュール例
- 配属先ごとの担当業務比較
- 「できる／できない」業務の整理
- 現場の声・体験談

### 実務系
- 介助や物品準備など手順を写真・イラスト付きで
- ありがちな失敗と防止策
- 段取りのコツ（タイムライン形式）
- チェックリスト（持ち物／確認項目）

### 転職系
- 成功・失敗事例（ビフォーアフター）
- 求人票の読み解き方
- 履歴書・職務経歴書テンプレート
- 面接質問と回答例

### 退職系
- 退職スケジュールのタイムライン
- 伝え方の言い換えフレーズ集
- 退職願・退職届の記入例
- 退職代行の判断基準

### 給与系
- 地域・施設別の給与比較表
- 手当（夜勤・資格・住宅）の詳細
- 年収シミュレーション
- 収入アップの具体的手順

### 資格系
- 資格ごとの難易度・費用・合格率
- 学習スケジュール例（1ヶ月／3ヶ月）
- 試験の出題傾向と対策
- 資格取得後のキャリア事例

### 看護師系
- 進学ルートの比較（メリット・デメリット）
- 仕事と学業の両立術
- 奨学金・支援制度まとめ
- 看護師転向の準備ステップ

### 患者対応系
- 症状別の声かけ例
- 認知症ケアのケーススタディ
- ご家族への説明フレーズ集
- 接遇マナーのチェックリスト

### 悩み系
- よくある悩みと対処法（Q&A）
- 心のセルフケア手順
- 相談窓口・支援制度の紹介
- 気持ちを整えるワークシート

### 人間関係系
- 上司・先輩への伝え方テンプレート
- 連携を円滑にする打ち合わせ例
- トラブルのケースと解決プロセス
- 場面別のクッション言葉・敬語

### 感染対策系
- 手指衛生や個人防護具の手順
- 最新ガイドラインの要約
- シーズンごとの注意点（インフル・ノロ等）
- 感染発生時の対応フロー

---

## 🔄 定期メンテナンス推奨

### 月次チェック
```bash
# 総合レポート実行
node scripts/maintenance.js report
```

### チェック項目:
- [ ] 古い記事（6ヶ月以上更新なし）の有無
- [ ] メタデータ不足の記事の有無
- [ ] 文字数不足記事の増減
- [ ] 人気記事の閲覧数推移
- [ ] 統計データに `参考: [資料名](URL)` 形式の出典が付与され、リンク先が有効かどうか

### 四半期レビュー
- 人気記事TOP10の内容更新
- 不人気記事の原因分析・改善
- 新規トレンドキーワードの追加
- カテゴリバランスの調整

---

## 💡 Tips

### 効率的な拡充方法
1. **似た記事をまとめて対応**: 同じカテゴリの記事を連続で編集
2. **テンプレート活用**: 成功した記事構成を他記事に応用
3. **データを再利用**: 統計データや事例を複数記事で活用
4. **AI支援**: ChatGPT等で下書き→手作業で調整

### 避けるべきこと
- ❌ 無理な文字数稼ぎ（冗長な表現）
- ❌ 内容の重複（他記事とのコピペ）
- ❌ 根拠のない情報（要出典）
- ❌ 過度な自動生成（品質低下）

---

## 🔧 環境変数設定

全てのスクリプト実行には`SANITY_API_TOKEN`が必要です:

```bash
# .env.localファイルで設定済み
SANITY_API_TOKEN=skpuZy443p...（Editorトークン）
```

**トークン権限**: Editor以上（Viewerでは更新不可）

---

## 📞 サポート

### 問題が発生した場合

1. **APIエラー**: トークンの権限確認
   ```bash
   npx sanity debug --secrets
   ```

2. **スクリプトエラー**: Node.jsバージョン確認
   ```bash
   node --version  # v18以上推奨
   ```

3. **Sanity接続エラー**: プロジェクトID確認
   ```bash
   # sanity.config.ts のprojectId確認
   ```

### 参考ドキュメント
- Sanity公式ドキュメント: https://www.sanity.io/docs
- Next.js公式ドキュメント: https://nextjs.org/docs
- プロジェクト記事テンプレート: `/Users/user/Documents/prorenata_article_template.md`
