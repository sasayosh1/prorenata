# ProReNata コンテンツ改善ガイド

## 📊 現状サマリー（2025-10-08更新）

### ✅ 完了済み
- **メタデータ補完**: 全156記事のメタデータが完備
  - excerpt（記事要約）: 100%完了
  - metaDescription（SEO説明文）: 100%完了
  - focusKeyword（メインキーワード）: 100%完了
  - relatedKeywords（関連キーワード）: 100%完了

- **タグ最適化**: 全156記事にSEO最適タグを設定済み

- **機能実装完了**:
  - 関連記事表示システム
  - 閲覧数カウンター
  - 人気記事ランキング
  - 記事テンプレートシステム

### 🚧 要対応
1. **画像追加**: 156記事全てにメイン画像なし
   - 現在は画像なしで運用（ユーザー判断で後回し）

2. **コンテンツ拡充**: 105記事が1500文字未満
   - 最短: 804文字（看護助手の夜勤手当はいくらもらえる？）
   - 推奨: 1500-2500文字

---

## 🛠️ 利用可能なツール

### 1. メタデータ生成ツール
**ファイル**: `scripts/generate-metadata.js`

**機能**:
- 記事内容から自動的にメタデータ生成
- excerpt、metaDescription、focusKeyword、relatedKeywordsを自動作成

**使い方**:
```bash
# 全記事のメタデータを一括生成
node scripts/generate-metadata.js bulk

# 特定記事のメタデータ生成
node scripts/generate-metadata.js single <記事ID>

# ドライラン（プレビューのみ）
node scripts/generate-metadata.js bulk --dry-run
```

### 2. コンテンツ拡充支援ツール
**ファイル**: `scripts/expand-content.js`

**機能**:
- 文字数不足の記事を検出
- 見出し構造を分析
- カテゴリ別の拡充提案を生成

**使い方**:
```bash
# 文字数不足記事の一覧表示
node scripts/expand-content.js list

# 文字数不足記事の一覧（10件まで）
node scripts/expand-content.js list --limit 10

# 特定記事の詳細分析と改善提案
node scripts/expand-content.js analyze <記事ID>

# 2000文字未満の記事を表示
node scripts/expand-content.js list --min 2000
```

**出力例**:
```
📄 精神科病棟で働く看護助手の業務内容とは

📊 現状分析:
   文字数: 379文字
   段落数: 4段落
   見出し: H2×4, H3×4

💡 改善提案:
1. 🔴 文字数が1121文字不足しています
2. 🔴 段落が少なすぎます
   → 具体例、体験談、データなどを追加してください
```

### 3. メンテナンスツール
**ファイル**: `scripts/maintenance.js`

**機能**:
- 総合的な記事品質レポート生成
- 古い記事の検出
- メタデータ不足の検出
- 画像なし記事の検出
- 文字数不足の検出

**使い方**:
```bash
# 総合レポート生成
node scripts/maintenance.js report

# 6ヶ月以上更新なしの記事検索
node scripts/maintenance.js old 6

# メタデータ不足の記事検索
node scripts/maintenance.js metadata

# 画像なし記事検索
node scripts/maintenance.js images

# 文字数不足記事検索（1500文字未満）
node scripts/maintenance.js short 1500
```

### 4. 記事作成ツール
**ファイル**: `scripts/create-post.js`

**機能**:
- 対話形式で新規記事を作成
- カテゴリ選択
- 3種類のテンプレートから選択
- 自動スラッグ生成

**使い方**:
```bash
# 新規記事作成（対話形式）
node scripts/create-post.js
```

**テンプレート種類**:
1. **基礎知識・解説系**: 初心者向け説明記事
2. **実践ノウハウ系**: 具体的な手順・コツ
3. **キャリア・転職系**: キャリア判断・選択肢提示

---

## 📝 コンテンツ拡充の進め方

### Step 1: 優先順位の決定
```bash
# 文字数が特に少ない記事を確認
node scripts/expand-content.js list --limit 20
```

### Step 2: 個別記事の分析
```bash
# 記事IDを取得（URLから or Sanity Studioから）
# 詳細分析を実行
node scripts/expand-content.js analyze <記事ID>
```

### Step 3: Sanity Studioで編集
1. http://localhost:3333 でSanity Studioを開く
2. 該当記事を検索
3. 改善提案に基づいて内容を追加:
   - **具体例を追加**: 「例えば〜」「実際に〜」
   - **数字・データを追加**: 「平均〜」「約〜％」
   - **体験談を追加**: 「〜という声が多い」
   - **見出しを追加**: H2/H3で構造化
   - **箇条書きを活用**: 読みやすさ向上

### Step 4: 品質チェック
```bash
# 改善後、再度分析
node scripts/expand-content.js analyze <記事ID>
```

---

## 🎯 コンテンツ品質基準

### 文字数
- **最低**: 1500文字
- **推奨**: 1500-2500文字
- **上限**: 特になし（3000文字超えも可）

### 見出し構造
- **H2見出し**: 3-5個
- **H3見出し**: 各H2セクション内に1-3個
- **H4見出し**: 必要に応じて

### 段落・リスト
- **段落数**: 最低5段落以上
- **箇条書き**: 3つ以上の項目がある場合は活用
- **1段落の文字数**: 100-200文字程度

### コンテンツ要素
必ず含めるべき要素:
1. **導入文**: 読者の課題に共感
2. **具体例**: 「例えば」「実際に」
3. **数字・データ**: 信頼性向上
4. **実践的アドバイス**: 「〜するとよい」
5. **まとめ**: 要点の再確認

---

## 📋 カテゴリ別の拡充アイデア

### 基礎知識・入門系
- 用語の定義を詳しく
- 初心者によくある誤解の解説
- 具体的な数字やデータ
- よくある質問（FAQ）セクション

### 給料・年収系
- 地域別の給料比較表
- 経験年数別の給料推移
- 手当の詳細（夜勤手当、資格手当など）
- 給料アップのための具体的方法

### 転職・求人系
- 成功事例・失敗事例
- 転職タイミングの判断基準
- 転職エージェント活用法
- 履歴書・職務経歴書の書き方

### 悩み・ストレス系
- 具体的な体験談
- 解決策の手順を詳しく
- 専門家のアドバイス
- チェックリスト形式の診断

### 仕事内容・役割系
- 1日のスケジュール例
- 具体的な業務手順
- 注意点・コツ
- 現場の声・体験談

---

## 🔄 定期メンテナンス推奨

### 月次チェック
```bash
# 総合レポート実行
node scripts/maintenance.js report
```

### チェック項目:
- [ ] 古い記事（6ヶ月以上更新なし）の有無
- [ ] メタデータ不足の記事の有無
- [ ] 文字数不足記事の増減
- [ ] 人気記事の閲覧数推移
- [ ] 統計データに `参考: [資料名](URL)` 形式の出典が付与され、リンク先が有効かどうか

### 四半期レビュー
- 人気記事TOP10の内容更新
- 不人気記事の原因分析・改善
- 新規トレンドキーワードの追加
- カテゴリバランスの調整

---

## 💡 Tips

### 効率的な拡充方法
1. **似た記事をまとめて対応**: 同じカテゴリの記事を連続で編集
2. **テンプレート活用**: 成功した記事構成を他記事に応用
3. **データを再利用**: 統計データや事例を複数記事で活用
4. **AI支援**: ChatGPT等で下書き→手作業で調整

### 避けるべきこと
- ❌ 無理な文字数稼ぎ（冗長な表現）
- ❌ 内容の重複（他記事とのコピペ）
- ❌ 根拠のない情報（要出典）
- ❌ 過度な自動生成（品質低下）

---

## 🔧 環境変数設定

全てのスクリプト実行には`SANITY_API_TOKEN`が必要です:

```bash
# .env.localファイルで設定済み
SANITY_API_TOKEN=skpuZy443p...（Editorトークン）
```

**トークン権限**: Editor以上（Viewerでは更新不可）

---

## 📞 サポート

### 問題が発生した場合

1. **APIエラー**: トークンの権限確認
   ```bash
   npx sanity debug --secrets
   ```

2. **スクリプトエラー**: Node.jsバージョン確認
   ```bash
   node --version  # v18以上推奨
   ```

3. **Sanity接続エラー**: プロジェクトID確認
   ```bash
   # sanity.config.ts のprojectId確認
   ```

### 参考ドキュメント
- Sanity公式ドキュメント: https://www.sanity.io/docs
- Next.js公式ドキュメント: https://nextjs.org/docs
- プロジェクト記事テンプレート: `/Users/user/Documents/prorenata_article_template.md`
